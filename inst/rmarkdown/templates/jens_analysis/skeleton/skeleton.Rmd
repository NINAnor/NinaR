---
title: "Untitled"
author: ""
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  NinaR::jensAnalysis:
    highlight: tango
    fig_caption: yes
    toc: yes
---


```{r, include = F}
# Some common packages, loading rmarkdown doesn't like the messages from tidyverse, so we don't include this in the document'
require(tidyverse)
require(DBI)
require(RPostgres)
require(ggplot2)
require(xtable)
require(NinaR)
```


```{r setup, include=FALSE}
# This is optional
# I choose the 'styler' package for tidying the code to preserve indentations
# I set the cutoff for code tidying to 60, but this doesn't currently work with styler.
# Set tidy = True to get the knitr default
# I want all figures as png and pdf in high quality in a subfolder called figure

knitr::opts_chunk$set(
  echo = TRUE,
  tidy = "styler",
  dev = c("png", "pdf"),
  dpi = 600,
  fig.path = "figure/"
)

options(
  xtable.comment = F,
  xtable.include.rownames = F,
  nina.logo.y.pos = 0.15
)
palette(ninaPalette())
```



```{r, include = F, eval = F}
# This connects to the gisdatabase with a DBI connection named `con`.
# Use for example dbGetQuery(con, "SELECT * FROM ....") to query the database
postgreSQLConnect(
  host = "gisdata-db.nina.no",
  dbname = "gisdata",
  username = "postgjest",
  password = "gjestpost"
)
```


```{r, include = F, eval = F}
#To log into something with your own user, it's good practice not to store passwords in the script.
##I store the username and passwords in a file in my home folder, that only the owner can read.
#Not the prettiest solution, since I read in the info in plain text, but we delete the objects in the same code chunk so it works. 
##Here I also specify that big integers should be converted to integers in R. 
##There are some functions that don't have support for bigints in R at the moment.

source("~/.rpgpass")

postgreSQLConnect(
  host = "gisdata-db.nina.no",
  dbname = "gisdata",
  username = username,
  password = password,
  bigint  = "integer"
)

rm(list = c("username", "password"))
```
